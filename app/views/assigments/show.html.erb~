<div class="panel panel-primary">
  <div class="panel-heading">
    <h3 class="panel-title"><h3><%= @assigment.title %></h3><br /></h3>

    <p class="text-right">
      <strong>Due time:</strong>
      <%= Date.strptime(@assigment.due_time,'%m/%d/%Y').to_formatted_s(:long) %>
    </p>

</div>
<br />
<div class="panel-body">
<p>
  <strong>Task Description:</strong>
  <%= raw(@assigment.description) %>
</p>
<% if lecturer? %>
<%= link_to 'Edit', edit_topic_assigment_path(@assigment.topic, @assigment) %> |
<%= link_to 'Back', topic_assigments_path(@assigment.topic) %>
<% end %>
</div>

  <table class="table table-hover">
  <thead>
    <tr>
      <th>Name Student</th>
      <th>Classroom</th>
      <th>Upload At</th>
      <th>Attachment</th>
      <% if lecturer? %>
      <th>Action</th>
      <% end %>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @assigment.collection_assigments.each do |collection| %>
      <tr>
        <td><%= collection.user.name %></td>
        <td><%= collection.user.classrooms.collect { |a| a.name }.join(" ") %></td>
        <td><%= collection.created_at.to_formatted_s(:long) %></td>
        <% if lecturer? %>
        <td><%= link_to "Download Task", collection.attachment_url %></td>
        <td><%= link_to "Delete", [collection.assigment, collection], method: :delete, class: "btn btn-danger", data: {confirm: "Are you sure delete assigment ?"} %><td>
        <% else %>
        <td><%= collection.attachment %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>






<div class="panel-footer">
<% if current_student? %>
<h2>Upload Assigment:</h2>
<%= form_for([@assigment, @assigment.collection_assigments.build], html: { multipart: true })  do |f| %>
  <p>
    <%= f.file_field :attachment, required: true %>

  </p>
  <p>
    <%= f.submit "Upload Assigment" %>
  </p>
<% end %>
<% end %>
</div>
</div>
